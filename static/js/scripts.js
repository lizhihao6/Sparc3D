var videosAttributes = [{'caption': 'GT Mesh', 'mesh_src': 'assets/samples/gt/bumblebee_rotb_update.drc', 'src': 'assets/videos/gt/bumblebee_rotb_update.mp4'}, {'caption': 'Ours (1024)', 'mesh_src': 'assets/samples/ours_1024/bumblebee_rotb_update.drc', 'src': 'assets/videos/ours_1024/bumblebee_rotb_update.mp4'}, {'caption': 'Ours (512)', 'mesh_src': 'assets/samples/ours_512/bumblebee_rotb_update.drc', 'src': 'assets/videos/ours_512/bumblebee_rotb_update.mp4'}, {'caption': 'Dora', 'mesh_src': 'assets/samples/dora/bumblebee_rotb_update.drc', 'src': 'assets/videos/dora/bumblebee_rotb_update.mp4'}, {'caption': 'Trellis', 'mesh_src': 'assets/samples/trellis/bumblebee_rotb_update.drc', 'src': 'assets/videos/trellis/bumblebee_rotb_update.mp4'}, {'mesh_src': 'assets/samples/gt/saber_lily_-_distant_avalon_figure.drc', 'src': 'assets/videos/gt/saber_lily_-_distant_avalon_figure.mp4'}, {'mesh_src': 'assets/samples/ours_1024/saber_lily_-_distant_avalon_figure.drc', 'src': 'assets/videos/ours_1024/saber_lily_-_distant_avalon_figure.mp4'}, {'mesh_src': 'assets/samples/ours_512/saber_lily_-_distant_avalon_figure.drc', 'src': 'assets/videos/ours_512/saber_lily_-_distant_avalon_figure.mp4'}, {'mesh_src': 'assets/samples/dora/saber_lily_-_distant_avalon_figure.drc', 'src': 'assets/videos/dora/saber_lily_-_distant_avalon_figure.mp4'}, {'mesh_src': 'assets/samples/trellis/saber_lily_-_distant_avalon_figure.drc', 'src': 'assets/videos/trellis/saber_lily_-_distant_avalon_figure.mp4'}, {'mesh_src': 'assets/samples/gt/rx-0_full_armor_unicorn_gundam.drc', 'src': 'assets/videos/gt/rx-0_full_armor_unicorn_gundam.mp4'}, {'mesh_src': 'assets/samples/ours_1024/rx-0_full_armor_unicorn_gundam.drc', 'src': 'assets/videos/ours_1024/rx-0_full_armor_unicorn_gundam.mp4'}, {'mesh_src': 'assets/samples/ours_512/rx-0_full_armor_unicorn_gundam.drc', 'src': 'assets/videos/ours_512/rx-0_full_armor_unicorn_gundam.mp4'}, {'mesh_src': 'assets/samples/dora/rx-0_full_armor_unicorn_gundam.drc', 'src': 'assets/videos/dora/rx-0_full_armor_unicorn_gundam.mp4'}, {'mesh_src': 'assets/samples/trellis/rx-0_full_armor_unicorn_gundam.drc', 'src': 'assets/videos/trellis/rx-0_full_armor_unicorn_gundam.mp4'}, {'mesh_src': 'assets/samples/gt/canon_at-1_retro_camera.drc', 'src': 'assets/videos/gt/canon_at-1_retro_camera.mp4'}, {'mesh_src': 'assets/samples/ours_1024/canon_at-1_retro_camera.drc', 'src': 'assets/videos/ours_1024/canon_at-1_retro_camera.mp4'}, {'mesh_src': 'assets/samples/ours_512/canon_at-1_retro_camera.drc', 'src': 'assets/videos/ours_512/canon_at-1_retro_camera.mp4'}, {'mesh_src': 'assets/samples/dora/canon_at-1_retro_camera.drc', 'src': 'assets/videos/dora/canon_at-1_retro_camera.mp4'}, {'mesh_src': 'assets/samples/trellis/canon_at-1_retro_camera.drc', 'src': 'assets/videos/trellis/canon_at-1_retro_camera.mp4'}, {'mesh_src': 'assets/samples/gt/iss-_international_space_station.drc', 'src': 'assets/videos/gt/iss-_international_space_station.mp4'}, {'mesh_src': 'assets/samples/ours_1024/iss-_international_space_station.drc', 'src': 'assets/videos/ours_1024/iss-_international_space_station.mp4'}, {'mesh_src': 'assets/samples/ours_512/iss-_international_space_station.drc', 'src': 'assets/videos/ours_512/iss-_international_space_station.mp4'}, {'mesh_src': 'assets/samples/dora/iss-_international_space_station.drc', 'src': 'assets/videos/dora/iss-_international_space_station.mp4'}, {'mesh_src': 'assets/samples/trellis/iss-_international_space_station.drc', 'src': 'assets/videos/trellis/iss-_international_space_station.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.drc', 'src': 'assets/videos/gt/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.drc', 'src': 'assets/videos/ours_1024/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.drc', 'src': 'assets/videos/ours_512/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.drc', 'src': 'assets/videos/dora/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.drc', 'src': 'assets/videos/trellis/objaverse_000-013_ae33b9cc47084c85a3ccfcc034761d02.mp4'}, {'mesh_src': 'assets/samples/gt/abo_B079V39Z25.drc', 'src': 'assets/videos/gt/abo_B079V39Z25.mp4'}, {'mesh_src': 'assets/samples/ours_1024/abo_B079V39Z25.drc', 'src': 'assets/videos/ours_1024/abo_B079V39Z25.mp4'}, {'mesh_src': 'assets/samples/ours_512/abo_B079V39Z25.drc', 'src': 'assets/videos/ours_512/abo_B079V39Z25.mp4'}, {'mesh_src': 'assets/samples/dora/abo_B079V39Z25.drc', 'src': 'assets/videos/dora/abo_B079V39Z25.mp4'}, {'mesh_src': 'assets/samples/trellis/abo_B079V39Z25.drc', 'src': 'assets/videos/trellis/abo_B079V39Z25.mp4'}, {'mesh_src': 'assets/samples/gt/white_flower.drc', 'src': 'assets/videos/gt/white_flower.mp4'}, {'mesh_src': 'assets/samples/ours_1024/white_flower.drc', 'src': 'assets/videos/ours_1024/white_flower.mp4'}, {'mesh_src': 'assets/samples/ours_512/white_flower.drc', 'src': 'assets/videos/ours_512/white_flower.mp4'}, {'mesh_src': 'assets/samples/dora/white_flower.drc', 'src': 'assets/videos/dora/white_flower.mp4'}, {'mesh_src': 'assets/samples/trellis/white_flower.drc', 'src': 'assets/videos/trellis/white_flower.mp4'}, {'mesh_src': 'assets/samples/gt/kyouko_kirigiri_figure_from_danganronpa.drc', 'src': 'assets/videos/gt/kyouko_kirigiri_figure_from_danganronpa.mp4'}, {'mesh_src': 'assets/samples/ours_1024/kyouko_kirigiri_figure_from_danganronpa.drc', 'src': 'assets/videos/ours_1024/kyouko_kirigiri_figure_from_danganronpa.mp4'}, {'mesh_src': 'assets/samples/ours_512/kyouko_kirigiri_figure_from_danganronpa.drc', 'src': 'assets/videos/ours_512/kyouko_kirigiri_figure_from_danganronpa.mp4'}, {'mesh_src': 'assets/samples/dora/kyouko_kirigiri_figure_from_danganronpa.drc', 'src': 'assets/videos/dora/kyouko_kirigiri_figure_from_danganronpa.mp4'}, {'mesh_src': 'assets/samples/trellis/kyouko_kirigiri_figure_from_danganronpa.drc', 'src': 'assets/videos/trellis/kyouko_kirigiri_figure_from_danganronpa.mp4'}, {'mesh_src': 'assets/samples/gt/project1necklace_final_model.drc', 'src': 'assets/videos/gt/project1necklace_final_model.mp4'}, {'mesh_src': 'assets/samples/ours_1024/project1necklace_final_model.drc', 'src': 'assets/videos/ours_1024/project1necklace_final_model.mp4'}, {'mesh_src': 'assets/samples/ours_512/project1necklace_final_model.drc', 'src': 'assets/videos/ours_512/project1necklace_final_model.mp4'}, {'mesh_src': 'assets/samples/dora/project1necklace_final_model.drc', 'src': 'assets/videos/dora/project1necklace_final_model.mp4'}, {'mesh_src': 'assets/samples/trellis/project1necklace_final_model.drc', 'src': 'assets/videos/trellis/project1necklace_final_model.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.drc', 'src': 'assets/videos/gt/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.drc', 'src': 'assets/videos/ours_1024/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.drc', 'src': 'assets/videos/ours_512/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.drc', 'src': 'assets/videos/dora/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.drc', 'src': 'assets/videos/trellis/objaverse_000-002_768784fe68c04970b121ec7aabcf03e1.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-008_d94fb13604af437980a080951612310b.drc', 'src': 'assets/videos/gt/objaverse_000-008_d94fb13604af437980a080951612310b.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-008_d94fb13604af437980a080951612310b.drc', 'src': 'assets/videos/ours_1024/objaverse_000-008_d94fb13604af437980a080951612310b.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-008_d94fb13604af437980a080951612310b.drc', 'src': 'assets/videos/ours_512/objaverse_000-008_d94fb13604af437980a080951612310b.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-008_d94fb13604af437980a080951612310b.drc', 'src': 'assets/videos/dora/objaverse_000-008_d94fb13604af437980a080951612310b.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-008_d94fb13604af437980a080951612310b.drc', 'src': 'assets/videos/trellis/objaverse_000-008_d94fb13604af437980a080951612310b.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.drc', 'src': 'assets/videos/gt/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.drc', 'src': 'assets/videos/ours_1024/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.drc', 'src': 'assets/videos/ours_512/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.drc', 'src': 'assets/videos/dora/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.drc', 'src': 'assets/videos/trellis/objaverse_000-009_1e7a0307e0f04b07a5c0889fb325b993.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.drc', 'src': 'assets/videos/gt/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.drc', 'src': 'assets/videos/ours_1024/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.drc', 'src': 'assets/videos/ours_512/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.drc', 'src': 'assets/videos/dora/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.drc', 'src': 'assets/videos/trellis/objaverse_000-011_217ecd30faa54f20b03d8f0ad9ece9ee.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.drc', 'src': 'assets/videos/gt/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.drc', 'src': 'assets/videos/ours_1024/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.drc', 'src': 'assets/videos/ours_512/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.drc', 'src': 'assets/videos/dora/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.drc', 'src': 'assets/videos/trellis/objaverse_000-012_44de9112ce564d35be97a06c302a2fe3.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-000_0048e8224b174b759771e39ff521ee2.drc', 'src': 'assets/videos/gt/objaverse_000-000_0048e8224b174b759771e39ff521ee2.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-000_0048e8224b174b759771e39ff521ee2.drc', 'src': 'assets/videos/ours_1024/objaverse_000-000_0048e8224b174b759771e39ff521ee2.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-000_0048e8224b174b759771e39ff521ee2.drc', 'src': 'assets/videos/ours_512/objaverse_000-000_0048e8224b174b759771e39ff521ee2.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-000_0048e8224b174b759771e39ff521ee2.drc', 'src': 'assets/videos/dora/objaverse_000-000_0048e8224b174b759771e39ff521ee2.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-000_0048e8224b174b759771e39ff521ee2.drc', 'src': 'assets/videos/trellis/objaverse_000-000_0048e8224b174b759771e39ff521ee2.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.drc', 'src': 'assets/videos/gt/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.drc', 'src': 'assets/videos/ours_1024/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.drc', 'src': 'assets/videos/ours_512/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.drc', 'src': 'assets/videos/dora/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.drc', 'src': 'assets/videos/trellis/objaverse_000-000_019900af7ef14e07b66c3e74aec43d35.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.drc', 'src': 'assets/videos/gt/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.drc', 'src': 'assets/videos/ours_1024/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.drc', 'src': 'assets/videos/ours_512/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.drc', 'src': 'assets/videos/dora/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.drc', 'src': 'assets/videos/trellis/objaverse_000-000_56d3182919494dd0b6a773f563ced14a.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.drc', 'src': 'assets/videos/gt/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.drc', 'src': 'assets/videos/ours_1024/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.drc', 'src': 'assets/videos/ours_512/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.drc', 'src': 'assets/videos/dora/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.drc', 'src': 'assets/videos/trellis/objaverse_000-000_6eb1fbba00bf4317b3e82824a42b840e.mp4'}, {'mesh_src': 'assets/samples/gt/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.drc', 'src': 'assets/videos/gt/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.mp4'}, {'mesh_src': 'assets/samples/ours_1024/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.drc', 'src': 'assets/videos/ours_1024/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.mp4'}, {'mesh_src': 'assets/samples/ours_512/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.drc', 'src': 'assets/videos/ours_512/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.mp4'}, {'mesh_src': 'assets/samples/dora/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.drc', 'src': 'assets/videos/dora/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.mp4'}, {'mesh_src': 'assets/samples/trellis/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.drc', 'src': 'assets/videos/trellis/objaverse_000-002_0aecee43ac2749499a16ab4388a0baa2.mp4'}];

function createElementFromHTML(htmlString) {
    var div = document.createElement('div');
    div.innerHTML = htmlString.trim();

    // Change this to div.childNodes to support multiple top-level nodes.
    return div.firstChild;
}

function add_videos(num_videos = 10) {
    let thumbnails = document.getElementById("textToVideos");
    let start = window.start;
//   videoPaths = videoPaths.slice(0, 3);

    const groupedVideos = groupVideosByObject();

    for (let i = start; i < start + num_videos && i < videosAttributes.length; i++) {
        let outer = document.createElement("DIV");
        outer.classList = "w3-col l2 m4 vidContainer";
        let videoAttributes = videosAttributes[i];

        const objectName = extractObjectName(videoAttributes.src);
        const methodName = extractMethodName(videoAttributes.src);
        
        outer.dataset.objectName = objectName;
        outer.dataset.methodName = methodName;
        outer.dataset.hasCompleteGroup = groupedVideos[objectName]?.isComplete || false;
  

        if (videoAttributes.caption) {
            const caption = createElementFromHTML(`<p valign="middle" halign="middle" align="center">${videoAttributes.caption}</p>`);
            outer.appendChild(caption);
        }

        const video = createElementFromHTML(`<video class="video" id="video${i}" loop muted playsinline
            src="${videoAttributes.src}"></video>`);
        video.addEventListener('loadedmetadata', function() {
            resizeAndPlay(this);
        });
        video.play();
        outer.appendChild(video);

        let componentCanvas = document.createElement("CANVAS")
        componentCanvas.height = "0";
        componentCanvas.classList = "videoMerge";
        componentCanvas.id = "video" + i + "Merge";
        outer.appendChild(componentCanvas);

        if (videoAttributes.mesh_src) {
            let iframe = createElementFromHTML(`<iframe src="" class="meshViewer" frameBorder="0"></iframe>`);
            let iframe_button = createElementFromHTML(`<a href="#" class="w3-button w3-light-grey w3-block viewerToggle" data-sequence="${videoAttributes.mesh_src}" ></a>`);
            if (videoAttributes.nframes) {
                iframe_button.dataset.nframes = videoAttributes.nframes;
            }
            add_button_logic(iframe_button);
            outer.appendChild(iframe);
            outer.appendChild(iframe_button)
        } else {
            let dummy = createElementFromHTML(`<div class="emptydiv"></div>`);
            outer.appendChild(dummy);
        }

        thumbnails.appendChild(outer);
        window.start = window.start + 1;
    }
    if (window.start >= videosAttributes.length) {
        const load_more_button = document.getElementById("load_more");
        load_more_button.remove();
    }

}

function groupVideosByObject() {
    const groups = {};
    const methods = ['gt', 'ours_1024', 'ours_512', 'dora', 'trellis'];
    
    videosAttributes.forEach(attr => {
        const objectName = extractObjectName(attr.src);
        const methodName = extractMethodName(attr.src);
        
        if (!groups[objectName]) {
            groups[objectName] = { methods: new Set(), videos: [] };
        }
        
        groups[objectName].methods.add(methodName);
        groups[objectName].videos.push(attr);
    });
    
    // 标记完整的组（包含所有5个方法）
    Object.keys(groups).forEach(objectName => {
        groups[objectName].isComplete = groups[objectName].methods.size === methods.length;
    });
    
    return groups;
}

function extractObjectName(videoSrc) {
    const match = videoSrc.match(/\/([^\/]+)\.mp4$/);
    return match ? match[1] : null;
}

function extractMethodName(videoSrc) {
    const match = videoSrc.match(/\/(gt|ours_1024|ours_512|dora|trellis)\//);
    return match ? match[1] : null;
}

function disableMeshViewer(iframe, canvas, a, textLabelMesh, video) {
    iframe.src = '';
    iframe.style.display = 'none';
    canvas.style.display = 'none';
    video.style.display = 'block';
    a.textContent = textLabelMesh;
}

function enableMeshViewer(iframe, canvas, a, textLabelVideo, video, sequence, nframes) {
    iframe.src = './render_draco.html?sequence=' + sequence;
    if (nframes) {
        iframe.src += '&nframes=' + nframes;
    }
    iframe.style.display = 'block';
    video.style.display = 'none';
    canvas.style.display = 'none';
    a.textContent = textLabelVideo;
}

function add_button_logic(element) {
    const textLabelMesh = 'Load mesh';
    const textLabelVideo = 'Show video';
    element.textContent = textLabelMesh;
    
    element.addEventListener('click', function (e) {
        e.preventDefault();
        const target = e.target;
        const parent = target.parentElement;
        const iframe = parent.querySelector('.meshViewer');
        const canvas = parent.querySelector('.videoMerge');
        const video = parent.querySelector('video');
        
        if (element.textContent === textLabelMesh) {
            const sequence = target.dataset.sequence;
            const nframes = target.dataset.nframes;
            enableMeshViewer(iframe, canvas, target, textLabelVideo, video, sequence, nframes);
            
            const placeholder = parent.getElementsByClassName('animated-background');
            if (placeholder.length > 0) {
                placeholder[0].style.display = 'none';
            }
        } else {
            disableMeshViewer(iframe, canvas, target, textLabelMesh, video);
        }
    });

    return false;
}

// 移除全局的 activeElements
window.start = 0;
add_videos(num_videos = 20);